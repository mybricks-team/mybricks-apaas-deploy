'use strict';
const _0x3878b4 = _0x17fd;
function _0x17fd(_0x2afbe9, _0x9ffb40) {
    const _0x74859f = _0x347d();
    return _0x17fd = function (_0x4ca6ee, _0x1af702) {
        _0x4ca6ee = _0x4ca6ee - (-0x10 * -0x49 + -0x62 * -0x39 + -0x1981);
        let _0xbd405d = _0x74859f[_0x4ca6ee];
        return _0xbd405d;
    }, _0x17fd(_0x2afbe9, _0x9ffb40);
}
(function (_0x5d61cf, _0x168837) {
    const _0x5215af = _0x17fd, _0x3ea8af = _0x5d61cf();
    while (!![]) {
        try {
            const _0x5b2796 = -parseInt(_0x5215af(0x12b)) / (0xd2f + -0xafb + -0x233 * 0x1) + parseInt(_0x5215af(0x10f)) / (-0x44d + -0x19 * -0x41 + -0x20a) + parseInt(_0x5215af(0xf5)) / (0x21b8 + -0x1836 + -0x97f) * (parseInt(_0x5215af(0xf4)) / (0x1d90 + 0x9 * 0xcf + 0xb * -0x359)) + parseInt(_0x5215af(0x112)) / (0x2240 + -0x16ee + 0x107 * -0xb) + -parseInt(_0x5215af(0x120)) / (-0x5b * -0x31 + -0x11b6 * -0x2 + 0x1 * -0x34d1) + -parseInt(_0x5215af(0x104)) / (0x1135 + 0x13 * 0x1d3 + -0x33d7) + parseInt(_0x5215af(0xfd)) / (-0x1bc7 + 0x1 * -0x1f47 + -0x6 * -0x9d9) * (parseInt(_0x5215af(0x101)) / (0x9ac * 0x1 + 0x9d1 * 0x1 + 0x1e * -0xa6));
            if (_0x5b2796 === _0x168837)
                break;
            else
                _0x3ea8af['push'](_0x3ea8af['shift']());
        } catch (_0x3e5643) {
            _0x3ea8af['push'](_0x3ea8af['shift']());
        }
    }
}(_0x347d, -0x14f68d + -0x1 * -0xbb1b3 + 0x14703a));
function _0x347d() {
    const _0x164fe6 = [
        'path',
        '100mb',
        '检查请求域名对应服务',
        '请求服务拒绝连接，请',
        'test',
        'OmBFb',
        'apiProxy',
        '610968kEQUHn',
        'ENOTFOUND',
        'SWHAF',
        '2525415bhlYxX',
        'bSshg',
        'ECONNRESET',
        'bTpch',
        'TIMEOUT_TI',
        'LXxJY',
        'NCEHE',
        'OQkWS',
        'ZAcLo',
        'QKKmy',
        'x-target-u',
        '__esModule',
        'pBVsC',
        'match',
        '8164512hLeGNQ',
        'yCsKF',
        '端处理逻辑是否正常',
        'headers',
        'origin',
        'tp-proxy',
        'keys',
        'ooaFd',
        'defineProp',
        'VqPVM',
        'g\x20up，请确认服务',
        '998193dcoCQI',
        '名配置',
        'ReVpF',
        'ECONNREFUS',
        'call',
        'host',
        'url',
        '../constan',
        'send',
        'cNCfR',
        'socket\x20han',
        'express-ht',
        '析错误，请检查请求域',
        'includes',
        'split',
        'status',
        'replace',
        '端是否正常',
        'zVquV',
        'erty',
        'jyaOf',
        '392jcHQVB',
        '12816PMsgAj',
        '请求域名\x20DNS\x20解',
        'uqSPN',
        'length',
        'YFCWH',
        'WgPyZ',
        'query',
        'FLvui',
        '36336hbISSI',
        'hostname',
        'assign',
        'forEach',
        '4959PDbbmg',
        'VtsYS',
        'parse',
        '4486440wPRbOz',
        'code',
        'X-Target-U',
        'azyVH'
    ];
    _0x347d = function () {
        return _0x164fe6;
    };
    return _0x347d();
}
Object[_0x3878b4(0x128) + _0x3878b4(0xf2)](exports, _0x3878b4(0x11d), { 'value': !![] }), exports[_0x3878b4(0x10e)] = void (0x23fd + 0x7c8 + 0x8c1 * -0x5);
const constants_1 = require(_0x3878b4(0xe6) + 'ts'), proxy = require(_0x3878b4(0xea) + _0x3878b4(0x125)), URL = require(_0x3878b4(0xe5));
function apiProxy(_0x458635 = {}) {
    const _0xe20c88 = _0x3878b4, _0x48ffef = {
            'yCsKF': function (_0x3679ef, _0x33e282) {
                return _0x3679ef(_0x33e282);
            },
            'WgPyZ': _0xe20c88(0x110),
            'ooaFd': _0xe20c88(0xf6) + _0xe20c88(0xeb) + _0xe20c88(0x12c),
            'YFCWH': _0xe20c88(0xe2) + 'ED',
            'cNCfR': _0xe20c88(0x10b) + _0xe20c88(0x10a) + _0xe20c88(0xf0),
            'NCEHE': _0xe20c88(0x114),
            'VtsYS': _0xe20c88(0xe9) + _0xe20c88(0x12a) + _0xe20c88(0x122),
            'VqPVM': _0xe20c88(0x106) + 'rl',
            'bTpch': _0xe20c88(0x11c) + 'rl',
            'ReVpF': function (_0x51636b, _0x2bc2ba) {
                return _0x51636b === _0x2bc2ba;
            },
            'uqSPN': function (_0x22732b, _0x25f72d) {
                return _0x22732b === _0x25f72d;
            },
            'FLvui': function (_0x2fe515) {
                return _0x2fe515();
            },
            'QKKmy': function (_0x5f32a1, _0x2f5f03) {
                return _0x5f32a1 === _0x2f5f03;
            },
            'pBVsC': function (_0x5074b9, _0x54e2e6, _0x22b71a) {
                return _0x5074b9(_0x54e2e6, _0x22b71a);
            },
            'ZAcLo': _0xe20c88(0x109)
        };
    return async (_0x3e2b42, _0xec88b5, _0x150f58) => {
        const _0x448157 = _0xe20c88, _0x31bb9c = {
                'jyaOf': function (_0x199e2b, _0x11ee5e) {
                    const _0x3859c0 = _0x17fd;
                    return _0x48ffef[_0x3859c0(0x121)](_0x199e2b, _0x11ee5e);
                },
                'SWHAF': _0x48ffef[_0x448157(0xfa)],
                'OmBFb': _0x48ffef[_0x448157(0x127)],
                'LXxJY': _0x48ffef[_0x448157(0xf9)],
                'azyVH': _0x48ffef[_0x448157(0xe8)],
                'zVquV': _0x48ffef[_0x448157(0x118)],
                'OQkWS': _0x48ffef[_0x448157(0x102)]
            };
        var _0x5af787, _0x200085, _0x54823d;
        try {
            let _0x231f61 = _0x3e2b42[_0x448157(0x123)][_0x48ffef[_0x448157(0x129)]] || _0x3e2b42[_0x448157(0x123)][_0x48ffef[_0x448157(0x115)]];
            const _0x4beb3e = /(?:https?:\/\/)?(?:www\.)?([^\/]+)/, _0x42f41f = _0x48ffef[_0x448157(0xe1)](_0x200085 = _0x48ffef[_0x448157(0xe1)](_0x5af787 = _0x48ffef[_0x448157(0xf7)](_0x231f61, null) || _0x48ffef[_0x448157(0xf7)](_0x231f61, void (-0x2 * 0x1297 + -0x4b7 + 0x29e5)) ? void (0x2563 + 0x18ae + -0x3e11) : _0x231f61[_0x448157(0x11f)], null) || _0x48ffef[_0x448157(0xe1)](_0x5af787, void (-0x115f + 0x1273 * -0x1 + 0x23d2)) ? void (-0x2 * -0x801 + -0xe05 + -0x1fd) : _0x5af787[_0x448157(0xe3)](_0x231f61, _0x4beb3e), null) || _0x48ffef[_0x448157(0xe1)](_0x200085, void (0x172d + 0x83d * 0x3 + -0x2fe4)) ? void (0x419 * 0x5 + 0x1d95 + -0x1ed * 0x1a) : _0x200085[-0x1d80 + -0x1 * -0xcc7 + 0x10ba];
            if (!/(?:\/[^\/]*)?\/paas\/api\/proxy/[_0x448157(0x10c)](_0x3e2b42[_0x448157(0x108)]) || !_0x231f61 || !_0x42f41f)
                return _0x48ffef[_0x448157(0xfc)](_0x150f58);
            if (_0x48ffef[_0x448157(0xe1)](_0x42f41f, _0x3e2b42[_0x448157(0xfe)]))
                return _0x48ffef[_0x448157(0xfc)](_0x150f58);
            const _0x1e1566 = _0x48ffef[_0x448157(0xf7)](_0x54823d = _0x231f61[_0x448157(0x11f)](/(https?:\/\/)?(?:www\.)?([^\/]+)/), null) || _0x48ffef[_0x448157(0x11b)](_0x54823d, void (-0x18a0 + -0xd5d * -0x1 + 0xb43)) ? void (-0xf6d + 0x3 * 0x7fc + -0x887) : _0x54823d[0x2177 + -0x6a2 + -0x1 * 0x1ad5];
            return _0x3e2b42[_0x448157(0xe5)] = _0x231f61[_0x448157(0xef)](_0x1e1566, ''), _0x3e2b42[_0x448157(0x123)][_0x448157(0x124)] = _0x1e1566, _0x3e2b42[_0x448157(0x123)][_0x448157(0xe4)] = _0x42f41f, _0x48ffef[_0x448157(0x11e)](proxy, _0x231f61, {
                'limit': _0x48ffef[_0x448157(0x11a)],
                'timeout': constants_1[_0x448157(0x116) + 'ME'],
                'proxyReqPathResolver': _0x42594f => {
                    const _0x5d9fa7 = _0x448157, _0x12307e = {
                            'bSshg': function (_0x2e135d, _0x2e61b3) {
                                const _0x4b0112 = _0x17fd;
                                return _0x31bb9c[_0x4b0112(0xf3)](_0x2e135d, _0x2e61b3);
                            }
                        }, _0x2f6ceb = URL[_0x5d9fa7(0x103)](_0x42594f[_0x5d9fa7(0xe5)], !![]);
                    _0x2f6ceb[_0x5d9fa7(0xfb)] = Object[_0x5d9fa7(0xff)](Object[_0x5d9fa7(0xff)]({}, _0x2f6ceb[_0x5d9fa7(0xfb)] || {}), _0x42594f[_0x5d9fa7(0xfb)]);
                    let _0xbbf4be = _0x42594f[_0x5d9fa7(0xe5)][_0x5d9fa7(0xed)]('?')[0x1a * 0xed + -0x1c0d + 0x1 * 0x3fb];
                    return Object[_0x5d9fa7(0x126)](_0x2f6ceb[_0x5d9fa7(0xfb)])[_0x5d9fa7(0xf8)] && Object[_0x5d9fa7(0x126)](_0x42594f[_0x5d9fa7(0xfb)])[_0x5d9fa7(0x100)](_0x2dc9b4 => {
                        const _0x615fff = _0x5d9fa7;
                        _0xbbf4be += '' + (_0xbbf4be[_0x615fff(0xec)]('?') ? '&' : '?') + _0x2dc9b4 + '=' + _0x12307e[_0x615fff(0x113)](encodeURIComponent, _0x42594f[_0x615fff(0xfb)][_0x2dc9b4]);
                    }), _0xbbf4be;
                },
                'proxyErrorHandler': function (_0x18d2ae, _0x36bf02, _0x8c3fc0) {
                    const _0x290915 = _0x448157;
                    switch (_0x18d2ae && _0x18d2ae[_0x290915(0x105)]) {
                    case _0x31bb9c[_0x290915(0x111)]: {
                            return _0x36bf02[_0x290915(0xee)](0x1 * 0x7a9 + 0x22a6 + -0x285b)[_0x290915(0xe7)]({
                                'statusCode': 0x1f4,
                                'message': _0x31bb9c[_0x290915(0x10d)]
                            });
                        }
                    case _0x31bb9c[_0x290915(0x117)]: {
                            return _0x36bf02[_0x290915(0xee)](-0x12b7 * -0x2 + 0x4f * -0x22 + -0x18fc)[_0x290915(0xe7)]({
                                'statusCode': 0x1f4,
                                'message': _0x31bb9c[_0x290915(0x107)]
                            });
                        }
                    case _0x31bb9c[_0x290915(0xf1)]: {
                            return _0x36bf02[_0x290915(0xee)](-0xbf5 * -0x3 + -0x1b86 + -0x665 * 0x1)[_0x290915(0xe7)]({
                                'statusCode': 0x1f4,
                                'message': _0x31bb9c[_0x290915(0x119)]
                            });
                        }
                    default: {
                            _0x31bb9c[_0x290915(0xf3)](_0x8c3fc0, _0x18d2ae);
                        }
                    }
                }
            })(_0x3e2b42, _0xec88b5, _0x150f58);
        } catch (_0x295114) {
            return _0x48ffef[_0x448157(0xfc)](_0x150f58);
        }
    };
}
exports[_0x3878b4(0x10e)] = apiProxy;